# Writing a PLUGIN

## Overview

We illustrate how to write a plugin by creating one for searching for sequences in full text. We allow for a variety, DNA
RNA, 3-letter protein, 1-letter protein, Carbohydrates. It should be easily modifiable and upgradable.

We need to create the following interdependent components. The naming is important and inconsistencies will cause problems. We
take `sequence` as the unique "plugin name". It will occur in at least:

 * configuration filenames (e.g. `/org/xmlcml/ami2/plugins/sequence/args.xml`. This drives the operation of the program. It's a path relative to the Java classpath and is usually found as `src/main/resources/org/xmlcml/ami2/plugins/sequence/args.xml`. 
 * autogenerated directories `my_file/some_where/results/sequence/dna/results.xml`. `my_file/some_where/` is a QSN directory, abd after the calculation, the plugin `sequence`  generates (or uses an existing) `results` (reserved name) directory. Then it generates the subdirectory `sequence` (using the plugin name) and then plugin-specific subsubdirectories.
 * classes (e.g. `SequenceArgProcessor`). The functionality of `args.xml` and the Java class must be carefully matched (see below)
 * argument definitions in `args.xml`. These will be used to control action and generate files and will frequently use the pluginName.
 
We shall build checkers and autogenerators to aid consistency, but for now be extra careful and check. 

## Inheritance

We have the following inheritance hierarchy (discussed in detail in  and AMI.md)

```
    DefaultArgProcessor
        AMIArgProcessor
            SequenceArgProcessor
```

### DefaultArgProcessor

This contains all generic parsing software, general flow , input and output. See DEFAULT.md)

### AMIArgProcessor

This contains generic plugin parsing software, such as text contexts, output options, choice of inputs. See AMI.md)

## `args.xml`

We can rely on the functiona